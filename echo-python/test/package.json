{
    "name": "echo-test",
    "version": "0.7.0",
    "description": "Tests for Echo DApp",
    "author": "Victor Yves Crispim <victor.yves@cartesi.io>",
    "license": "Apache-2.0",
    "scripts": {
        "generateTypes": "proto-loader-gen-types --grpcLib @grpc/grpc-js --outDir generated-src/proto ../../grpc-interfaces/server-manager.proto",
        "buildImages": "cd .. && docker buildx bake",
        "setupConsole": "cd ../.. && cd frontend-console && yarn install && yarn build",
        "startBackend": "cd .. && python3 -m venv .env && . .env/bin/activate && pip install -r requirements.txt && ROLLUP_HTTP_SERVER_URL=http://127.0.0.1:5004 python3 echo.py > .env/echo.log 2>&1 &",
        "cleanEnvironment": "cd .. && rm -rf .env",
        "prepareEnvironment": "yarn generateTypes && yarn setupConsole && yarn buildImages",
        "startEnvironment:prod": "cd .. && docker-compose -f ../docker-compose.yml -f docker-compose.override.yml up -d",
        "startEnvironment:host": "cd .. && docker-compose -f ../docker-compose.yml -f docker-compose.override.yml -f ../docker-compose-host.yml up -d && cd test",
        "stopEnvironment": "cd .. && docker-compose -f ../docker-compose.yml -f docker-compose.override.yml down -v",
        "pretest:prod": "yarn prepareEnvironment && yarn startEnvironment:prod",
        "pretest:host": "yarn prepareEnvironment && yarn startEnvironment:host && yarn startBackend",
        "pretest:ci": "yarn generateTypes && yarn setupConsole && yarn startEnvironment:prod",
        "mocha": "mocha -r ts-node/register './*test.ts' -t 3m -b --address 0.0.0.0:5001",
        "test:prod": "yarn mocha",
        "test:host": "yarn mocha",
        "test:ci": "yarn mocha",
        "test": "wrap () { yarn test:prod \"$@\" && yarn test:host \"$@\"; }; wrap",
        "posttest": "yarn stopEnvironment",
        "posttest:prod": "yarn posttest",
        "posttest:host": "yarn posttest && yarn cleanEnvironment",
        "posttest:ci": "yarn posttest"
    },
    "devDependencies": {
        "@grpc/grpc-js": "^1.6.7",
        "@grpc/proto-loader": "^0.6.12",
        "@types/chai": "^4.3.1",
        "@types/chai-as-promised": "^7.1.5",
        "@types/google-protobuf": "^3.15.5",
        "@types/mocha": "^9.1.1",
        "@types/node": "^17.0.33",
        "chai": "^4.3.6",
        "chai-as-promised": "^7.1.1",
        "mocha": "^9.2.2",
        "ts-node": "^10.7.0",
        "typescript": "^4.6.4"
    }
}
